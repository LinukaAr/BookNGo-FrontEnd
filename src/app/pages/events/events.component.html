<!-- Main Container -->
<div class="container mt-4">
  <!-- Search and Filter Section -->
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="input-group">
        <span class="input-group-text"><i class="fas fa-search"></i></span>
        <input type="text" class="form-control" placeholder="Search events..." [(ngModel)]="searchTerm">
      </div>
    </div>
    <div class="col-md-6">
      <div class="d-flex justify-content-end gap-2">
        <select class="form-select w-auto" [(ngModel)]="selectedCategory">
          <option value="">All Categories</option>
          <option value="music">Music</option>
          <option value="sports">Sports</option>
          <option value="theater">Theater</option>
        </select>
        <select class="form-select w-auto" [(ngModel)]="sortBy">
          <option value="date">Sort by Date</option>
          <option value="price">Sort by Price</option>
          <option value="name">Sort by Name</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Events Grid -->
  <div class="row g-4">
    <div class="col-md-4" *ngFor="let event of filteredEvents">
      <div class="card h-100 shadow-sm hover-effect">
        <div class="position-relative">
          <img src="../../../assets/event1.jpg" class="card-img-top" alt="Event image"
            style="height: 200px; object-fit: cover;">
          <span class="position-absolute top-0 end-0 m-2 badge"
            [ngClass]="{'bg-danger': event.availableTickets < 10, 'bg-success': event.availableTickets >= 10}">
            {{event.availableTickets}} tickets left
          </span>
        </div>
        <div class="card-body">
          <h5 class="card-title text-primary">{{event.name}}</h5>
          <p class="card-text text-muted">{{event.shortDescription}}</p>
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="h5 mb-0">{{event.price | currency}}</span>
            <span class="badge bg-info">{{event.category}}</span>
          </div>
          <div class="d-flex align-items-center mb-3">
            <i class="fas fa-calendar-alt text-muted me-2"></i>
            <small>{{event.date | date:'mediumDate'}}</small>
            <i class="fas fa-map-marker-alt text-muted ms-3 me-2"></i>
            <small>{{event.location}}</small>
          </div>
          <div class="d-grid gap-2">
            <button class="btn btn-outline-primary" (click)="showDetails(event)">
              <i class="fas fa-info-circle me-2"></i>Details
            </button>
            <button class="btn btn-success" (click)="buyTickets(event)" [disabled]="event.availableTickets === 0">
              <i class="fas fa-ticket-alt me-2"></i>{{event.availableTickets === 0 ? 'Sold Out' : 'Buy Tickets'}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- No Results Message -->
  <div class="text-center py-5" *ngIf="filteredEvents?.length === 0">
    <i class="fas fa-search fa-3x text-muted mb-3"></i>
    <h4 class="text-muted">No events found</h4>
    <p class="text-muted">Try adjusting your search or filters</p>
  </div>
</div>

<!-- Details Modal -->
<div class="modal fade" id="eventDetailsModal" tabindex="-1" aria-labelledby="eventDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="eventDetailsModalLabel">{{selectedEvent?.name}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" *ngIf="selectedEvent">
        <img src="../../../assets/event1.jpg" class="img-fluid rounded mb-3" alt="Event image">
        <h6 class="text-primary">Description</h6>
        <p>{{selectedEvent.description}}</p>
        <div class="row mt-4">
          <div class="col-md-6">
            <h6>Event Details</h6>
            <ul class="list-unstyled">
              <li><i class="fas fa-calendar-alt me-2"></i>{{selectedEvent.date | date:'full'}}</li>
              <li><i class="fas fa-map-marker-alt me-2"></i>{{selectedEvent.location}}</li>
              <li><i class="fas fa-ticket-alt me-2"></i>{{selectedEvent.availableTickets}} tickets available</li>
              <li><i class="fas fa-tag me-2"></i>{{selectedEvent.price | currency}}</li>
            </ul>
          </div>
          <div class="col-md-6">
            <h6>Additional Information</h6>
            <ul class="list-unstyled">
              <li><i class="fas fa-clock me-2"></i>Duration: {{selectedEvent.duration}}</li>
              <li><i class="fas fa-users me-2"></i>Capacity: {{selectedEvent.capacity}}</li>
              <li><i class="fas fa-tag me-2"></i>Category: {{selectedEvent.category}}</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" (click)="selectedEvent && buyTickets(selectedEvent)"
          [disabled]="selectedEvent?.availableTickets === 0">
          <i class="fas fa-ticket-alt me-2"></i>Buy Tickets
        </button>
      </div>
    </div>
  </div>
</div>

